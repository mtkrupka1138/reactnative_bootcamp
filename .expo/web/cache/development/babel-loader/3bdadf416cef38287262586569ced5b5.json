{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nvar _jsxFileName = \"/Users/MTKrupka/Desktop/NucampFolder/4-React-Native/React-Native.nosync/nucampsite/components/CampsiteInfoComponent.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Share from \"react-native-web/dist/exports/Share\";\nimport { Card, Icon, Rating, Input } from 'react-native-elements';\nimport { connect } from 'react-redux';\nimport { baseUrl } from \"../shared/baseUrl\";\nimport { postFavorite as _postFavorite, postComment as _postComment } from \"../redux/ActionCreators\";\nimport * as Animatable from 'react-native-animatable';\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    campsites: state.campsites,\n    comments: state.comments,\n    favorites: state.favorites\n  };\n};\n\nvar mapDispatchToProps = {\n  postFavorite: function postFavorite(campsiteId) {\n    return _postFavorite(campsiteId);\n  },\n  postComment: function postComment(campsiteId, rating, author, text) {\n    return _postComment(campsiteId, rating, author, text);\n  }\n};\n\nfunction RenderCampsite(props) {\n  var campsite = props.campsite;\n  var view = React.createRef();\n\n  var recognizeDrag = function recognizeDrag(_ref) {\n    var dx = _ref.dx;\n    return dx < -200 ? true : false;\n  };\n\n  var recognizeComment = function recognizeComment(_ref2) {\n    var dx = _ref2.dx;\n    return dx > 200 ? true : false;\n  };\n\n  var panResponder = PanResponder.create({\n    onStartShouldSetPanResponder: function onStartShouldSetPanResponder() {\n      return true;\n    },\n    onPanResponderGrant: function onPanResponderGrant() {\n      view.current.rubberBand(1000).then(function (endState) {\n        return console.log(endState.finished ? 'finished' : 'canceled');\n      });\n    },\n    onPanResponderEnd: function onPanResponderEnd(e, gestureState) {\n      console.log('pan responder end', gestureState);\n\n      if (recognizeDrag(gestureState)) {\n        Alert.alert('Add Favorite', 'Are you sure you wish to add ' + campsite.name + ' to favorites?', [{\n          text: 'Cancel',\n          style: 'cancel',\n          onPress: function onPress() {\n            return console.log('Cancel Pressed');\n          }\n        }, {\n          text: 'OK',\n          onPress: function onPress() {\n            return props.favorite ? console.log('Already set as a favorite') : props.markFavorite();\n          }\n        }], {\n          cancelable: false\n        });\n      } else if (recognizeComment(gestureState)) {\n        props.onShowModal();\n      }\n\n      return true;\n    }\n  });\n\n  var shareCampsite = function shareCampsite(title, message, url) {\n    Share.share({\n      title: title,\n      message: title + \": \" + message + \" \" + url,\n      url: url\n    }, {\n      dialogTitle: 'Share ' + title\n    });\n  };\n\n  if (campsite) {\n    return React.createElement(Animatable.View, _extends({\n      animation: \"fadeInDown\",\n      duration: 2000,\n      delay: 1000,\n      ref: view\n    }, panResponder.panHandlers, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }), React.createElement(Card, {\n      featuredTitle: campsite.name,\n      image: {\n        uri: baseUrl + campsite.image\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      style: {\n        margin: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }\n    }, campsite.description), React.createElement(View, {\n      style: styles.cardRow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, React.createElement(Icon, {\n      name: props.favorite ? 'heart' : 'heart-o',\n      type: \"font-awesome\",\n      color: \"#f50\",\n      raised: true,\n      reverse: true,\n      onPress: function onPress() {\n        return props.favorite ? console.log('Already set as a favorite') : props.markFavorite();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 25\n      }\n    }), React.createElement(Icon, {\n      name: \"pencil\",\n      type: \"font-awesome\",\n      color: \"#5637DD\",\n      raised: true,\n      reverse: true,\n      onPress: function onPress() {\n        return props.onShowModal();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }\n    }), React.createElement(Icon, {\n      name: 'share',\n      type: \"font-awesome\",\n      color: \"#5637DD\",\n      raised: true,\n      reverse: true,\n      onPress: function onPress() {\n        return shareCampsite(campsite.name, campsite.description, baseUrl + campsite.image);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 25\n      }\n    }))));\n  }\n\n  return React.createElement(Animatable.View, {\n    animation: \"fadeInUp\",\n    duration: 2000,\n    delay: 1000,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, React.createElement(Card, {\n    title: \"Comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, \". . .\"));\n}\n\nfunction RenderComments(_ref3) {\n  var _this = this;\n\n  var comments = _ref3.comments;\n\n  var renderCommentItem = function renderCommentItem(_ref4) {\n    var item = _ref4.item;\n    return React.createElement(View, {\n      style: {\n        margin: 10\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontSize: 14\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, item.text), React.createElement(Rating, {\n      readonly: true,\n      startingValue: item.rating,\n      imageSize: 10,\n      style: {\n        fontSize: 12,\n        alignItems: 'flex-start',\n        paddingVertical: '5%'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, item.rating, \" Stars\"), React.createElement(Text, {\n      style: {\n        fontSize: 12\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, \"-- \" + item.author + \", \" + item.date));\n  };\n\n  return React.createElement(Card, {\n    title: \"Comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, React.createElement(FlatList, {\n    data: comments,\n    renderItem: renderCommentItem,\n    keyExtractor: function keyExtractor(item) {\n      return item.id.toString();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }));\n}\n\nvar CampsiteInfo = function (_Component) {\n  _inherits(CampsiteInfo, _Component);\n\n  var _super = _createSuper(CampsiteInfo);\n\n  function CampsiteInfo(props) {\n    var _this2;\n\n    _classCallCheck(this, CampsiteInfo);\n\n    _this2 = _super.call(this, props);\n    _this2.state = {\n      favorite: false,\n      showModal: false,\n      rating: 5,\n      author: '',\n      text: ''\n    };\n    return _this2;\n  }\n\n  _createClass(CampsiteInfo, [{\n    key: \"toggleModal\",\n    value: function toggleModal() {\n      this.setState({\n        showModal: !this.state.showModal\n      });\n    }\n  }, {\n    key: \"handleComment\",\n    value: function handleComment(campsiteId) {\n      this.props.postComment(campsiteId, this.state.rating, this.state.author, this.state.text);\n      this.toggleModal();\n    }\n  }, {\n    key: \"resetForm\",\n    value: function resetForm() {\n      this.setState({\n        rating: 5,\n        author: '',\n        text: '',\n        showModal: false\n      });\n    }\n  }, {\n    key: \"markFavorite\",\n    value: function markFavorite(campsiteId) {\n      this.props.postFavorite(campsiteId);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var campsiteId = this.props.navigation.getParam('campsiteId');\n      var campsite = this.props.campsites.campsites.filter(function (campsite) {\n        return campsite.id === campsiteId;\n      })[0];\n      var comments = this.props.comments.comments.filter(function (comment) {\n        return comment.campsiteId === campsiteId;\n      });\n      return React.createElement(ScrollView, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }\n      }, React.createElement(RenderCampsite, {\n        campsite: campsite,\n        favorite: this.props.favorites.includes(campsiteId),\n        markFavorite: function markFavorite() {\n          return _this3.markFavorite(campsiteId);\n        },\n        onShowModal: function onShowModal() {\n          return _this3.toggleModal();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 17\n        }\n      }), React.createElement(RenderComments, {\n        comments: comments,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 17\n        }\n      }), React.createElement(Modal, {\n        animationType: 'slide',\n        transparent: false,\n        visible: this.state.showModal,\n        onRequestClose: function onRequestClose() {\n          return _this3.toggleModal();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: styles.modal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 21\n        }\n      }, React.createElement(Rating, {\n        showRating: true,\n        startingValue: this.state.rating,\n        imageSize: 40,\n        onFinishRating: function onFinishRating(rating) {\n          return _this3.setState({\n            rating: rating\n          });\n        },\n        style: {\n          paddingVertical: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 25\n        }\n      }), React.createElement(Input, {\n        placeholder: \"Author\",\n        leftIcon: {\n          type: 'font-awesome',\n          name: 'user-o'\n        },\n        leftIconContainerStyle: {\n          paddingRight: 10\n        },\n        onChangeText: function onChangeText(author) {\n          return _this3.setState({\n            author: author\n          });\n        },\n        value: this.state.author,\n        maxLength: 30,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 25\n        }\n      }), React.createElement(Input, {\n        placeholder: \"Comment\",\n        leftIcon: {\n          type: 'font-awesome',\n          name: 'comment-o'\n        },\n        leftIconContainerStyle: {\n          paddingRight: 10\n        },\n        onChangeText: function onChangeText(text) {\n          return _this3.setState({\n            text: text\n          });\n        },\n        value: this.state.text,\n        maxLength: 100,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 25\n        }\n      }), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 25\n        }\n      }, React.createElement(Button, {\n        title: \"Submit\",\n        color: \"#5637DD\",\n        onPress: function onPress() {\n          _this3.handleComment(campsiteId);\n\n          _this3.resetForm();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 29\n        }\n      })), React.createElement(View, {\n        style: {\n          margin: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 25\n        }\n      }, React.createElement(Button, {\n        onPress: function onPress() {\n          _this3.toggleModal();\n\n          _this3.resetForm();\n        },\n        color: \"#808080\",\n        title: \"Cancel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 29\n        }\n      })))));\n    }\n  }]);\n\n  return CampsiteInfo;\n}(Component);\n\nCampsiteInfo.navigationOptions = {\n  title: 'Campsite Information'\n};\nvar styles = StyleSheet.create({\n  cardRow: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    flex: 1,\n    flexDirection: 'row',\n    margin: 20\n  },\n  modal: {\n    justifyContent: 'center',\n    margin: 20\n  }\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(CampsiteInfo);","map":{"version":3,"sources":["/Users/MTKrupka/Desktop/NucampFolder/4-React-Native/React-Native.nosync/nucampsite/components/CampsiteInfoComponent.js"],"names":["React","Component","Card","Icon","Rating","Input","connect","baseUrl","postFavorite","postComment","Animatable","mapStateToProps","state","campsites","comments","favorites","mapDispatchToProps","campsiteId","rating","author","text","RenderCampsite","props","campsite","view","createRef","recognizeDrag","dx","recognizeComment","panResponder","PanResponder","create","onStartShouldSetPanResponder","onPanResponderGrant","current","rubberBand","then","endState","console","log","finished","onPanResponderEnd","e","gestureState","Alert","alert","name","style","onPress","favorite","markFavorite","cancelable","onShowModal","shareCampsite","title","message","url","Share","share","dialogTitle","panHandlers","uri","image","margin","description","styles","cardRow","RenderComments","renderCommentItem","item","fontSize","alignItems","paddingVertical","date","id","toString","CampsiteInfo","showModal","setState","toggleModal","navigation","getParam","filter","comment","includes","modal","type","paddingRight","handleComment","resetForm","navigationOptions","StyleSheet","justifyContent","flex","flexDirection"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;;;;;;;;;;AAIA,SAASC,IAAT,EAAeC,IAAf,EAAqBC,MAArB,EAA6BC,KAA7B,QAA0C,uBAA1C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT;AACA,SAASC,YAAY,IAAZA,aAAT,EAAuBC,WAAW,IAAXA,YAAvB;AACA,OAAO,KAAKC,UAAZ,MAA4B,yBAA5B;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,KAAK,EAAI;AAC7B,SAAO;AACHC,IAAAA,SAAS,EAAED,KAAK,CAACC,SADd;AAEHC,IAAAA,QAAQ,EAAEF,KAAK,CAACE,QAFb;AAGHC,IAAAA,SAAS,EAAEH,KAAK,CAACG;AAHd,GAAP;AAKH,CAND;;AAQA,IAAMC,kBAAkB,GAAG;AACvBR,EAAAA,YAAY,EAAE,sBAAAS,UAAU;AAAA,WAAKT,aAAY,CAACS,UAAD,CAAjB;AAAA,GADD;AAEvBR,EAAAA,WAAW,EAAE,qBAACQ,UAAD,EAAaC,MAAb,EAAqBC,MAArB,EAA6BC,IAA7B;AAAA,WAAuCX,YAAW,CAACQ,UAAD,EAAaC,MAAb,EAAqBC,MAArB,EAA6BC,IAA7B,CAAlD;AAAA;AAFU,CAA3B;;AAKA,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAE3B,MAAOC,QAAP,GAAmBD,KAAnB,CAAOC,QAAP;AAEA,MAAMC,IAAI,GAAGxB,KAAK,CAACyB,SAAN,EAAb;;AAEA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB;AAAA,QAAEC,EAAF,QAAEA,EAAF;AAAA,WAAWA,EAAE,GAAG,CAAC,GAAP,GAAc,IAAd,GAAqB,KAA/B;AAAA,GAAtB;;AAEA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB;AAAA,QAAED,EAAF,SAAEA,EAAF;AAAA,WAAWA,EAAE,GAAG,GAAN,GAAa,IAAb,GAAoB,KAA9B;AAAA,GAAzB;;AAEA,MAAME,YAAY,GAAGC,YAAY,CAACC,MAAb,CAAoB;AACrCC,IAAAA,4BAA4B,EAAE;AAAA,aAAM,IAAN;AAAA,KADO;AAErCC,IAAAA,mBAAmB,EAAE,+BAAM;AACvBT,MAAAA,IAAI,CAACU,OAAL,CAAaC,UAAb,CAAwB,IAAxB,EACCC,IADD,CACM,UAAAC,QAAQ;AAAA,eAAIC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,QAAT,GAAoB,UAApB,GAAiC,UAA7C,CAAJ;AAAA,OADd;AAEH,KALoC;AAMrCC,IAAAA,iBAAiB,EAAE,2BAACC,CAAD,EAAIC,YAAJ,EAAqB;AACpCL,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCI,YAAjC;;AACA,UAAIjB,aAAa,CAACiB,YAAD,CAAjB,EAAiC;AAC7BC,QAAAA,KAAK,CAACC,KAAN,CACI,cADJ,EAEI,kCAAkCtB,QAAQ,CAACuB,IAA3C,GAAkD,gBAFtD,EAGI,CACI;AACI1B,UAAAA,IAAI,EAAE,QADV;AAEI2B,UAAAA,KAAK,EAAE,QAFX;AAGIC,UAAAA,OAAO,EAAE;AAAA,mBAAMV,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAAN;AAAA;AAHb,SADJ,EAMI;AACInB,UAAAA,IAAI,EAAE,IADV;AAEI4B,UAAAA,OAAO,EAAE;AAAA,mBAAM1B,KAAK,CAAC2B,QAAN,GACXX,OAAO,CAACC,GAAR,CAAY,2BAAZ,CADW,GACgCjB,KAAK,CAAC4B,YAAN,EADtC;AAAA;AAFb,SANJ,CAHJ,EAeI;AAAEC,UAAAA,UAAU,EAAE;AAAd,SAfJ;AAiBH,OAlBD,MAmBK,IAAIvB,gBAAgB,CAACe,YAAD,CAApB,EAAoC;AACrCrB,QAAAA,KAAK,CAAC8B,WAAN;AACH;;AACD,aAAO,IAAP;AACH;AA/BoC,GAApB,CAArB;;AAkCA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD,EAAQC,OAAR,EAAiBC,GAAjB,EAAyB;AAC3CC,IAAAA,KAAK,CAACC,KAAN,CAAY;AACRJ,MAAAA,KAAK,EAAEA,KADC;AAERC,MAAAA,OAAO,EAAKD,KAAL,UAAeC,OAAf,SAA0BC,GAFzB;AAGRA,MAAAA,GAAG,EAAEA;AAHG,KAAZ,EAIE;AACEG,MAAAA,WAAW,EAAE,WAAWL;AAD1B,KAJF;AAOH,GARD;;AAUA,MAAI/B,QAAJ,EAAc;AACV,WACI,oBAAC,UAAD,CAAY,IAAZ;AACI,MAAA,SAAS,EAAC,YADd;AAEI,MAAA,QAAQ,EAAE,IAFd;AAGI,MAAA,KAAK,EAAE,IAHX;AAII,MAAA,GAAG,EAAEC;AAJT,OAKQK,YAAY,CAAC+B,WALrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOI,oBAAC,IAAD;AACI,MAAA,aAAa,EAAErC,QAAQ,CAACuB,IAD5B;AAEI,MAAA,KAAK,EAAE;AAACe,QAAAA,GAAG,EAAEtD,OAAO,GAAGgB,QAAQ,CAACuC;AAAzB,OAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACC,QAAAA,MAAM,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKxC,QAAQ,CAACyC,WADd,CAHJ,EAMI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAEC,MAAM,CAACC,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AACI,MAAA,IAAI,EAAE5C,KAAK,CAAC2B,QAAN,GAAiB,OAAjB,GAA2B,SADrC;AAEI,MAAA,IAAI,EAAC,cAFT;AAGI,MAAA,KAAK,EAAC,MAHV;AAII,MAAA,MAAM,MAJV;AAKI,MAAA,OAAO,MALX;AAMI,MAAA,OAAO,EAAE;AAAA,eAAM3B,KAAK,CAAC2B,QAAN,GACXX,OAAO,CAACC,GAAR,CAAY,2BAAZ,CADW,GACgCjB,KAAK,CAAC4B,YAAN,EADtC;AAAA,OANb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAUI,oBAAC,IAAD;AACI,MAAA,IAAI,EAAC,QADT;AAEI,MAAA,IAAI,EAAC,cAFT;AAGI,MAAA,KAAK,EAAC,SAHV;AAII,MAAA,MAAM,MAJV;AAKI,MAAA,OAAO,MALX;AAMI,MAAA,OAAO,EAAE;AAAA,eAAM5B,KAAK,CAAC8B,WAAN,EAAN;AAAA,OANb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVJ,EAkBI,oBAAC,IAAD;AACI,MAAA,IAAI,EAAE,OADV;AAEI,MAAA,IAAI,EAAC,cAFT;AAGI,MAAA,KAAK,EAAC,SAHV;AAII,MAAA,MAAM,MAJV;AAKI,MAAA,OAAO,MALX;AAMI,MAAA,OAAO,EAAE;AAAA,eAAMC,aAAa,CAAC9B,QAAQ,CAACuB,IAAV,EAAgBvB,QAAQ,CAACyC,WAAzB,EAAsCzD,OAAO,GAAGgB,QAAQ,CAACuC,KAAzD,CAAnB;AAAA,OANb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlBJ,CANJ,CAPJ,CADJ;AA6CH;;AACD,SACI,oBAAC,UAAD,CAAY,IAAZ;AAAiB,IAAA,SAAS,EAAC,UAA3B;AAAsC,IAAA,QAAQ,EAAE,IAAhD;AAAsD,IAAA,KAAK,EAAE,IAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAC,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,CADJ;AAOH;;AAED,SAASK,cAAT,QAAoC;AAAA;;AAAA,MAAXrD,QAAW,SAAXA,QAAW;;AAEhC,MAAMsD,iBAAiB,GAAG,SAApBA,iBAAoB,QAAY;AAAA,QAAVC,IAAU,SAAVA,IAAU;AAClC,WACI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACN,QAAAA,MAAM,EAAE;AAAT,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACO,QAAAA,QAAQ,EAAE;AAAX,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA8BD,IAAI,CAACjD,IAAnC,CADJ,EAEI,oBAAC,MAAD;AAAQ,MAAA,QAAQ,MAAhB;AAAiB,MAAA,aAAa,EAAEiD,IAAI,CAACnD,MAArC;AAA6C,MAAA,SAAS,EAAE,EAAxD;AAA4D,MAAA,KAAK,EAAE;AAACoD,QAAAA,QAAQ,EAAE,EAAX;AAAeC,QAAAA,UAAU,EAAE,YAA3B;AAAyCC,QAAAA,eAAe,EAAE;AAA1D,OAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqIH,IAAI,CAACnD,MAA1I,WAFJ,EAGI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACoD,QAAAA,QAAQ,EAAE;AAAX,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAoCD,IAAI,CAAClD,MAAzC,UAAoDkD,IAAI,CAACI,IAAzD,CAHJ,CADJ;AAOH,GARD;;AAUA,SACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAC,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,QAAD;AACI,IAAA,IAAI,EAAE3D,QADV;AAEI,IAAA,UAAU,EAAEsD,iBAFhB;AAGI,IAAA,YAAY,EAAE,sBAAAC,IAAI;AAAA,aAAIA,IAAI,CAACK,EAAL,CAAQC,QAAR,EAAJ;AAAA,KAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ;AASH;;IAEKC,Y;;;;;AAEF,wBAAYtD,KAAZ,EAAmB;AAAA;;AAAA;;AACf,+BAAMA,KAAN;AACA,WAAKV,KAAL,GAAa;AACTqC,MAAAA,QAAQ,EAAE,KADD;AAET4B,MAAAA,SAAS,EAAE,KAFF;AAGT3D,MAAAA,MAAM,EAAE,CAHC;AAITC,MAAAA,MAAM,EAAE,EAJC;AAKTC,MAAAA,IAAI,EAAE;AALG,KAAb;AAFe;AASlB;;;;WAMD,uBAAc;AACV,WAAK0D,QAAL,CAAc;AAACD,QAAAA,SAAS,EAAE,CAAC,KAAKjE,KAAL,CAAWiE;AAAxB,OAAd;AACH;;;WAED,uBAAc5D,UAAd,EAA0B;AACtB,WAAKK,KAAL,CAAWb,WAAX,CAAuBQ,UAAvB,EAAmC,KAAKL,KAAL,CAAWM,MAA9C,EAAsD,KAAKN,KAAL,CAAWO,MAAjE,EAAyE,KAAKP,KAAL,CAAWQ,IAApF;AACA,WAAK2D,WAAL;AACH;;;WAED,qBAAY;AACR,WAAKD,QAAL,CAAc;AACV5D,QAAAA,MAAM,EAAE,CADE;AAEVC,QAAAA,MAAM,EAAE,EAFE;AAGVC,QAAAA,IAAI,EAAE,EAHI;AAIVyD,QAAAA,SAAS,EAAE;AAJD,OAAd;AAMH;;;WAED,sBAAa5D,UAAb,EAAyB;AACrB,WAAKK,KAAL,CAAWd,YAAX,CAAwBS,UAAxB;AACH;;;WAED,kBAAS;AAAA;;AACL,UAAMA,UAAU,GAAG,KAAKK,KAAL,CAAW0D,UAAX,CAAsBC,QAAtB,CAA+B,YAA/B,CAAnB;AACA,UAAM1D,QAAQ,GAAG,KAAKD,KAAL,CAAWT,SAAX,CAAqBA,SAArB,CAA+BqE,MAA/B,CAAsC,UAAA3D,QAAQ;AAAA,eAAIA,QAAQ,CAACmD,EAAT,KAAgBzD,UAApB;AAAA,OAA9C,EAA8E,CAA9E,CAAjB;AACA,UAAMH,QAAQ,GAAG,KAAKQ,KAAL,CAAWR,QAAX,CAAoBA,QAApB,CAA6BoE,MAA7B,CAAoC,UAAAC,OAAO;AAAA,eAAIA,OAAO,CAAClE,UAAR,KAAuBA,UAA3B;AAAA,OAA3C,CAAjB;AACA,aACI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,cAAD;AAAgB,QAAA,QAAQ,EAAEM,QAA1B;AACI,QAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWP,SAAX,CAAqBqE,QAArB,CAA8BnE,UAA9B,CADd;AAEI,QAAA,YAAY,EAAE;AAAA,iBAAM,MAAI,CAACiC,YAAL,CAAkBjC,UAAlB,CAAN;AAAA,SAFlB;AAGI,QAAA,WAAW,EAAE;AAAA,iBAAM,MAAI,CAAC8D,WAAL,EAAN;AAAA,SAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAMI,oBAAC,cAAD;AAAgB,QAAA,QAAQ,EAAEjE,QAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANJ,EAOI,oBAAC,KAAD;AACI,QAAA,aAAa,EAAE,OADnB;AAEI,QAAA,WAAW,EAAE,KAFjB;AAGI,QAAA,OAAO,EAAE,KAAKF,KAAL,CAAWiE,SAHxB;AAII,QAAA,cAAc,EAAE;AAAA,iBAAM,MAAI,CAACE,WAAL,EAAN;AAAA,SAJpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEd,MAAM,CAACoB,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AACI,QAAA,UAAU,MADd;AAEI,QAAA,aAAa,EAAE,KAAKzE,KAAL,CAAWM,MAF9B;AAGI,QAAA,SAAS,EAAE,EAHf;AAII,QAAA,cAAc,EAAE,wBAAAA,MAAM;AAAA,iBAAI,MAAI,CAAC4D,QAAL,CAAc;AAAC5D,YAAAA,MAAM,EAAEA;AAAT,WAAd,CAAJ;AAAA,SAJ1B;AAKI,QAAA,KAAK,EAAE;AAACsD,UAAAA,eAAe,EAAE;AAAlB,SALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAQI,oBAAC,KAAD;AACI,QAAA,WAAW,EAAC,QADhB;AAEI,QAAA,QAAQ,EAAE;AAACc,UAAAA,IAAI,EAAE,cAAP;AAAwBxC,UAAAA,IAAI,EAAC;AAA7B,SAFd;AAGI,QAAA,sBAAsB,EAAE;AAACyC,UAAAA,YAAY,EAAE;AAAf,SAH5B;AAII,QAAA,YAAY,EAAE,sBAAApE,MAAM;AAAA,iBAAI,MAAI,CAAC2D,QAAL,CAAc;AAAC3D,YAAAA,MAAM,EAAEA;AAAT,WAAd,CAAJ;AAAA,SAJxB;AAKI,QAAA,KAAK,EAAE,KAAKP,KAAL,CAAWO,MALtB;AAMI,QAAA,SAAS,EAAE,EANf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARJ,EAgBI,oBAAC,KAAD;AACI,QAAA,WAAW,EAAC,SADhB;AAEI,QAAA,QAAQ,EAAE;AAACmE,UAAAA,IAAI,EAAE,cAAP;AAAwBxC,UAAAA,IAAI,EAAC;AAA7B,SAFd;AAGI,QAAA,sBAAsB,EAAE;AAACyC,UAAAA,YAAY,EAAE;AAAf,SAH5B;AAII,QAAA,YAAY,EAAE,sBAAAnE,IAAI;AAAA,iBAAI,MAAI,CAAC0D,QAAL,CAAc;AAAC1D,YAAAA,IAAI,EAAEA;AAAP,WAAd,CAAJ;AAAA,SAJtB;AAKI,QAAA,KAAK,EAAE,KAAKR,KAAL,CAAWQ,IALtB;AAMI,QAAA,SAAS,EAAE,GANf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAhBJ,EAwBI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AACI,QAAA,KAAK,EAAC,QADV;AAEI,QAAA,KAAK,EAAC,SAFV;AAGI,QAAA,OAAO,EAAE,mBAAM;AACX,UAAA,MAAI,CAACoE,aAAL,CAAmBvE,UAAnB;;AACA,UAAA,MAAI,CAACwE,SAAL;AACH,SANL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAxBJ,EAkCI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAC1B,UAAAA,MAAM,EAAE;AAAT,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AACI,QAAA,OAAO,EAAE,mBAAM;AACX,UAAA,MAAI,CAACgB,WAAL;;AACA,UAAA,MAAI,CAACU,SAAL;AACH,SAJL;AAKI,QAAA,KAAK,EAAC,SALV;AAMI,QAAA,KAAK,EAAC,QANV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAlCJ,CANJ,CAPJ,CADJ;AA8DH;;;;EAzGsBxF,S;;AAArB2E,Y,CAaKc,iB,GAAoB;AACvBpC,EAAAA,KAAK,EAAE;AADgB,C;AA+F/B,IAAMW,MAAM,GAAG0B,UAAU,CAAC5D,MAAX,CAAkB;AAC7BmC,EAAAA,OAAO,EAAE;AACLK,IAAAA,UAAU,EAAE,QADP;AAELqB,IAAAA,cAAc,EAAE,QAFX;AAGLC,IAAAA,IAAI,EAAE,CAHD;AAILC,IAAAA,aAAa,EAAE,KAJV;AAKL/B,IAAAA,MAAM,EAAE;AALH,GADoB;AAQ7BsB,EAAAA,KAAK,EAAE;AACHO,IAAAA,cAAc,EAAE,QADb;AAEH7B,IAAAA,MAAM,EAAE;AAFL;AARsB,CAAlB,CAAf;AAcA,eAAezD,OAAO,CAACK,eAAD,EAAkBK,kBAAlB,CAAP,CAA6C4D,YAA7C,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Text, View, ScrollView, FlatList,\n    Modal, Button, StyleSheet,\n    Alert, PanResponder, Share } from 'react-native';\nimport { Card, Icon, Rating, Input } from 'react-native-elements';\nimport { connect } from 'react-redux';\nimport { baseUrl } from '../shared/baseUrl';\nimport { postFavorite, postComment } from '../redux/ActionCreators';\nimport * as Animatable from 'react-native-animatable';\n\nconst mapStateToProps = state => {\n    return {\n        campsites: state.campsites,\n        comments: state.comments,\n        favorites: state.favorites\n    };\n};\n\nconst mapDispatchToProps = {\n    postFavorite: campsiteId => (postFavorite(campsiteId)),\n    postComment: (campsiteId, rating, author, text) => (postComment(campsiteId, rating, author, text))\n};\n\nfunction RenderCampsite(props) {\n\n    const {campsite} = props;\n\n    const view = React.createRef();\n\n    const recognizeDrag = ({dx}) => (dx < -200) ? true : false;\n    \n    const recognizeComment = ({dx}) => (dx > 200) ? true : false;\n\n    const panResponder = PanResponder.create({\n        onStartShouldSetPanResponder: () => true,\n        onPanResponderGrant: () => {\n            view.current.rubberBand(1000)\n            .then(endState => console.log(endState.finished ? 'finished' : 'canceled'));\n        },\n        onPanResponderEnd: (e, gestureState) => {\n            console.log('pan responder end', gestureState);\n            if (recognizeDrag(gestureState)) {\n                Alert.alert(\n                    'Add Favorite',\n                    'Are you sure you wish to add ' + campsite.name + ' to favorites?',\n                    [\n                        {\n                            text: 'Cancel',\n                            style: 'cancel',\n                            onPress: () => console.log('Cancel Pressed')\n                        },\n                        {\n                            text: 'OK',\n                            onPress: () => props.favorite ?\n                                console.log('Already set as a favorite') : props.markFavorite()\n                        }\n                    ],\n                    { cancelable: false }\n                );\n            }\n            else if (recognizeComment(gestureState)) {\n                props.onShowModal();\n            }\n            return true;\n        }\n    });\n\n    const shareCampsite = (title, message, url) => {\n        Share.share({\n            title: title,\n            message: `${title}: ${message} ${url}`,\n            url: url\n        },{\n            dialogTitle: 'Share ' + title\n        });\n    };\n\n    if (campsite) {\n        return (\n            <Animatable.View\n                animation='fadeInDown'\n                duration={2000}\n                delay={1000}\n                ref={view}\n                {...panResponder.panHandlers}\n            >\n                <Card\n                    featuredTitle={campsite.name}\n                    image={{uri: baseUrl + campsite.image}}>\n                    <Text style={{margin: 10}}>\n                        {campsite.description}\n                    </Text>\n                    <View style={styles.cardRow}>\n                        <Icon\n                            name={props.favorite ? 'heart' : 'heart-o'}\n                            type='font-awesome'\n                            color='#f50'\n                            raised\n                            reverse\n                            onPress={() => props.favorite ? \n                                console.log('Already set as a favorite') : props.markFavorite()}\n                        />\n                        <Icon \n                            name='pencil'\n                            type='font-awesome'\n                            color='#5637DD'\n                            raised\n                            reverse\n                            onPress={() => props.onShowModal()}\n                        />\n                        <Icon\n                            name={'share'}\n                            type='font-awesome'\n                            color='#5637DD'\n                            raised\n                            reverse\n                            onPress={() => shareCampsite(campsite.name, campsite.description, baseUrl + campsite.image)} \n                        />\n                    </View>\n                </Card>\n            </Animatable.View>\n            \n        );\n    }\n    return (\n        <Animatable.View animation='fadeInUp' duration={2000} delay={1000}>\n            <Card title='Comments'>\n                . . .\n            </Card>\n        </Animatable.View>\n    );\n}\n\nfunction RenderComments({comments}) {\n\n    const renderCommentItem = ({item}) => {\n        return (\n            <View style={{margin: 10}}>\n                <Text style={{fontSize: 14}}>{item.text}</Text>\n                <Rating readonly startingValue={item.rating} imageSize={10} style={{fontSize: 12, alignItems: 'flex-start', paddingVertical: '5%'}}>{item.rating} Stars</Rating>\n                <Text style={{fontSize: 12}}>{`-- ${item.author}, ${item.date}`}</Text>\n            </View>\n        );\n    };\n\n    return (\n        <Card title='Comments'>\n            <FlatList\n                data={comments}\n                renderItem={renderCommentItem}\n                keyExtractor={item => item.id.toString()}\n            />\n        </Card>\n    );\n}\n\nclass CampsiteInfo extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            favorite: false,\n            showModal: false,\n            rating: 5,\n            author: '',\n            text: '',\n        };\n    }\n\n    static navigationOptions = {\n        title: 'Campsite Information'\n    }\n\n    toggleModal() {\n        this.setState({showModal: !this.state.showModal});\n    }\n\n    handleComment(campsiteId) {\n        this.props.postComment(campsiteId, this.state.rating, this.state.author, this.state.text)\n        this.toggleModal();\n    }\n\n    resetForm() {\n        this.setState({\n            rating: 5,\n            author: '',\n            text: '',\n            showModal: false\n        });\n    }\n\n    markFavorite(campsiteId) {\n        this.props.postFavorite(campsiteId);\n    }\n\n    render() {\n        const campsiteId = this.props.navigation.getParam('campsiteId');\n        const campsite = this.props.campsites.campsites.filter(campsite => campsite.id === campsiteId)[0];\n        const comments = this.props.comments.comments.filter(comment => comment.campsiteId === campsiteId);\n        return (\n            <ScrollView>\n                <RenderCampsite campsite={campsite}\n                    favorite={this.props.favorites.includes(campsiteId)}\n                    markFavorite={() => this.markFavorite(campsiteId)}\n                    onShowModal={() => this.toggleModal()}\n                />\n                <RenderComments comments={comments} />\n                <Modal \n                    animationType={'slide'}\n                    transparent={false}\n                    visible={this.state.showModal}\n                    onRequestClose={() => this.toggleModal()}\n                >\n                    <View style={styles.modal}>\n                        <Rating\n                            showRating\n                            startingValue={this.state.rating}\n                            imageSize={40}\n                            onFinishRating={rating => this.setState({rating: rating})}\n                            style={{paddingVertical: 10}}\n                        />\n                        <Input \n                            placeholder='Author'\n                            leftIcon={{type: 'font-awesome' , name:'user-o'}}\n                            leftIconContainerStyle={{paddingRight: 10}}\n                            onChangeText={author => this.setState({author: author})}\n                            value={this.state.author}\n                            maxLength={30}\n                        />\n                        <Input \n                            placeholder='Comment'\n                            leftIcon={{type: 'font-awesome' , name:'comment-o'}}\n                            leftIconContainerStyle={{paddingRight: 10}}\n                            onChangeText={text => this.setState({text: text})}\n                            value={this.state.text}\n                            maxLength={100}\n                        />\n                        <View>\n                            <Button \n                                title='Submit'\n                                color='#5637DD'\n                                onPress={() => {\n                                    this.handleComment(campsiteId); \n                                    this.resetForm();\n                                }}\n                            />\n                        </View>\n                        <View style={{margin: 10}}>\n                            <Button \n                                onPress={() => {\n                                    this.toggleModal();\n                                    this.resetForm();\n                                }} \n                                color='#808080'\n                                title='Cancel'\n                            />\n                        </View>\n                    </View>\n                </Modal>\n            </ScrollView>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    cardRow: {\n        alignItems: 'center',\n        justifyContent: 'center',\n        flex: 1,\n        flexDirection: 'row',\n        margin: 20\n    },\n    modal: { \n        justifyContent: 'center',\n        margin: 20\n    }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CampsiteInfo);"]},"metadata":{},"sourceType":"module"}